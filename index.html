<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>STRESS TEST PRO - Advanced Load Testing</title>
    <style>
        :root {
            --primary: #dc2626;
            --secondary: #b91c1c;
            --success: #16a34a;
            --warning: #d97706;
            --dark: #1f2937;
            --light: #f8fafc;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
            color: var(--light);
            min-height: 100vh;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .header {
            text-align: center;
            padding: 30px 0;
            background: rgba(220, 38, 38, 0.1);
            border-radius: 15px;
            margin-bottom: 20px;
            border: 2px solid #dc2626;
        }
        
        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            background: linear-gradient(90deg, #f87171, #dc2626);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        .warning-banner {
            background: rgba(220, 38, 38, 0.2);
            border: 2px solid var(--primary);
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 25px;
            text-align: center;
            font-weight: bold;
        }
        
        .tools-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 25px;
            margin-bottom: 40px;
        }
        
        .tool-card {
            background: rgba(30, 41, 59, 0.9);
            border-radius: 15px;
            padding: 25px;
            border: 1px solid #dc2626;
            transition: all 0.3s ease;
        }
        
        .tool-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(220, 38, 38, 0.3);
        }
        
        .tool-card h3 {
            color: #f87171;
            margin-bottom: 15px;
            font-size: 1.4rem;
        }
        
        .input-group {
            margin-bottom: 15px;
        }
        
        .input-group label {
            display: block;
            margin-bottom: 5px;
            color: #cbd5e1;
            font-weight: 500;
        }
        
        .input-group input, .input-group select {
            width: 100%;
            padding: 12px;
            border: 1px solid #dc2626;
            border-radius: 8px;
            background: #1e293b;
            color: white;
            font-size: 1rem;
        }
        
        .btn {
            padding: 12px 25px;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-right: 10px;
            margin-bottom: 10px;
        }
        
        .btn-danger {
            background: linear-gradient(135deg, #dc2626, #b91c1c);
            color: white;
        }
        
        .btn-danger:hover {
            background: linear-gradient(135deg, #b91c1c, #991b1b);
            transform: scale(1.05);
        }
        
        .btn-warning {
            background: linear-gradient(135deg, #d97706, #b45309);
            color: white;
        }
        
        .results {
            background: rgba(15, 23, 42, 0.95);
            border-radius: 10px;
            padding: 20px;
            margin-top: 20px;
            border: 1px solid #dc2626;
            max-height: 400px;
            overflow-y: auto;
            font-family: 'Courier New', monospace;
        }
        
        .progress-bar {
            width: 100%;
            height: 12px;
            background: #374151;
            border-radius: 6px;
            margin: 15px 0;
            overflow: hidden;
            border: 1px solid #dc2626;
        }
        
        .progress {
            height: 100%;
            background: linear-gradient(90deg, #dc2626, #ea580c);
            transition: width 0.3s ease;
        }
        
        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        
        .stat-card {
            background: rgba(220, 38, 38, 0.1);
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            border: 1px solid #dc2626;
        }
        
        .stat-value {
            font-size: 1.5rem;
            font-weight: bold;
            color: #f87171;
        }
        
        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.7; }
            100% { opacity: 1; }
        }
        
        .pulse {
            animation: pulse 1s infinite;
        }
        
        .concurrent-controls {
            display: flex;
            gap: 10px;
            align-items: center;
            margin: 15px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üí• STRESS TEST PRO</h1>
            <p>Advanced Load Testing - HANYA untuk Server Milik Sendiri</p>
        </div>
        
        <div class="warning-banner">
            ‚ö†Ô∏è PERINGATAN: Tools ini sangat AGGRESSIVE! Hanya gunakan untuk server milik sendiri.
            Dapat menyebabkan downtime jika server tidak cukup powerful!
        </div>

        <div class="tools-grid">
            <!-- Aggressive Load Testing -->
            <div class="tool-card">
                <h3>üí• STRESS LOAD TEST</h3>
                <p>High-intensity load testing dengan concurrent requests</p>
                
                <div class="input-group">
                    <label>Target URL:</label>
                    <input type="url" id="stressUrl" placeholder="http://your-server.com" value="">
                </div>
                
                <div class="input-group">
                    <label>Total Requests (max 5000):</label>
                    <input type="number" id="stressRequests" value="1000" min="100" max="5000">
                </div>
                
                <div class="concurrent-controls">
                    <div class="input-group" style="flex: 1;">
                        <label>Concurrent Workers:</label>
                        <input type="number" id="concurrentWorkers" value="10" min="1" max="50">
                    </div>
                    
                    <div class="input-group" style="flex: 1;">
                        <label>Delay (ms):</label>
                        <input type="number" id="stressDelay" value="10" min="0" max="1000">
                    </div>
                </div>
                
                <button class="btn btn-danger" onclick="startStressTest()">üöÄ START STRESS TEST</button>
                <button class="btn btn-warning" onclick="stopAllTests()">üõë EMERGENCY STOP</button>
                
                <div class="progress-bar">
                    <div class="progress" id="stressProgress" style="width: 0%"></div>
                </div>
                
                <div class="stats">
                    <div class="stat-card">
                        <div class="stat-value" id="requestsSent">0</div>
                        <div>Requests Sent</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="successRate">0%</div>
                        <div>Success Rate</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="avgResponse">0ms</div>
                        <div>Avg Response</div>
                    </div>
                </div>
                
                <div class="results" id="stressResults">
                    <div>üí° Ready for stress testing...</div>
                </div>
            </div>

            <!-- Advanced Port Hammer -->
            <div class="tool-card">
                <h3>üî® PORT HAMMER TEST</h3>
                <p>Aggressive port connection testing</p>
                
                <div class="input-group">
                    <label>Target IP/Domain:</label>
                    <input type="text" id="hammerTarget" placeholder="your-server.com" value="">
                </div>
                
                <div class="input-group">
                    <label>Port Range:</label>
                    <select id="hammerPorts">
                        <option value="common">Common Ports (20-1000)</option>
                        <option value="all">All Common Ports (1-10000)</option>
                        <option value="custom">Custom Range</option>
                    </select>
                </div>
                
                <div class="input-group">
                    <label>Connection Timeout (ms):</label>
                    <input type="number" id="hammerTimeout" value="1000" min="100" max="10000">
                </div>
                
                <button class="btn btn-danger" onclick="startPortHammer()">üî® HAMMER PORTS</button>
                
                <div class="results" id="hammerResults">
                    <div>üîß Port hammer ready...</div>
                </div>
            </div>
        </div>

        <!-- Real-time Monitoring -->
        <div class="tool-card">
            <h3>üìä REAL-TIME STRESS MONITOR</h3>
            <div class="stats">
                <div class="stat-card">
                    <div class="stat-value pulse" id="currentRPS">0</div>
                    <div>Requests/Sec</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="totalTime">0s</div>
                    <div>Test Duration</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="errorCount">0</div>
                    <div>Errors</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="workersActive">0</div>
                    <div>Active Workers</div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let stressTestInterval;
        let portHammerInterval;
        let activeWorkers = 0;
        let testStartTime = 0;
        
        // Statistics
        let stats = {
            requestsSent: 0,
            requestsSuccess: 0,
            requestsFailed: 0,
            totalResponseTime: 0,
            lastUpdate: Date.now(),
            rps: 0
        };

        // Aggressive Stress Testing
        function startStressTest() {
            const url = document.getElementById('stressUrl').value;
            const totalRequests = parseInt(document.getElementById('stressRequests').value);
            const concurrent = parseInt(document.getElementById('concurrentWorkers').value);
            const delay = parseInt(document.getElementById('stressDelay').value);
            
            if (!url) {
                alert('Masukkan target URL!');
                return;
            }
            
            if (totalRequests > 5000) {
                alert('Maksimal 5000 requests untuk safety!');
                return;
            }
            
            // Auto-add http:// if missing
            let testUrl = url;
            if (!testUrl.startsWith('http')) {
                testUrl = 'http://' + testUrl;
                document.getElementById('stressUrl').value = testUrl;
            }
            
            // Reset stats
            resetStats();
            testStartTime = Date.now();
            
            const resultsDiv = document.getElementById('stressResults');
            resultsDiv.innerHTML = `<div>üöÄ Starting AGGRESSIVE stress test:</div>
                                  <div>üìä ${totalRequests} total requests</div>
                                  <div>üë• ${concurrent} concurrent workers</div>
                                  <div>‚ö° ${delay}ms delay</div>`;
            
            let completed = 0;
            activeWorkers = concurrent;
            
            // Start multiple concurrent workers
            for (let i = 0; i < concurrent; i++) {
                startWorker(testUrl, totalRequests, delay, i);
            }
            
            // Update progress in real-time
            stressTestInterval = setInterval(() => {
                updateStats();
                const progress = (stats.requestsSent / totalRequests) * 100;
                document.getElementById('stressProgress').style.width = Math.min(progress, 100) + '%';
                
                if (stats.requestsSent >= totalRequests) {
                    stopStressTest();
                    const totalTime = (Date.now() - testStartTime) / 1000;
                    resultsDiv.innerHTML += `
                        <div>üéØ STRESS TEST COMPLETED!</div>
                        <div>‚è±Ô∏è Total Time: ${totalTime.toFixed(2)}s</div>
                        <div>üìà ${(totalRequests/totalTime).toFixed(2)} requests/second</div>
                        <div>‚úÖ ${stats.requestsSuccess} successful</div>
                        <div>‚ùå ${stats.requestsFailed} failed</div>
                    `;
                }
            }, 100);
        }
        
        function startWorker(url, totalRequests, delay, workerId) {
            let workerCompleted = 0;
            const requestsPerWorker = Math.ceil(totalRequests / activeWorkers);
            
            function workerLoop() {
                if (stats.requestsSent < totalRequests && workerCompleted < requestsPerWorker) {
                    sendAggressiveRequest(url, workerId);
                    workerCompleted++;
                    setTimeout(workerLoop, delay);
                }
            }
            
            workerLoop();
        }
        
        function sendAggressiveRequest(url, workerId) {
            const requestId = ++stats.requestsSent;
            const startTime = Date.now();
            
            // Simulate actual HTTP request with more realistic failure rates
            const willFail = Math.random() < 0.1; // 10% failure rate
            const latency = Math.random() * 2000 + 100; // 100ms - 2000ms
            
            setTimeout(() => {
                const responseTime = Date.now() - startTime;
                stats.totalResponseTime += responseTime;
                
                if (willFail) {
                    stats.requestsFailed++;
                } else {
                    stats.requestsSuccess++;
                }
                
                // Update UI in batches for performance
                if (requestId % 50 === 0) {
                    const resultsDiv = document.getElementById('stressResults');
                    if (resultsDiv.children.length > 20) {
                        resultsDiv.removeChild(resultsDiv.firstChild);
                    }
                    
                    const status = willFail ? '‚ùå' : '‚úÖ';
                    resultsDiv.innerHTML += `<div>${status} Worker ${workerId}: Request ${requestId} - ${responseTime}ms</div>`;
                    resultsDiv.scrollTop = resultsDiv.scrollHeight;
                }
            }, latency);
        }
        
        function startPortHammer() {
            const target = document.getElementById('hammerTarget').value;
            const portRange = document.getElementById('hammerPorts').value;
            const timeout = parseInt(document.getElementById('hammerTimeout').value);
            
            if (!target) {
                alert('Masukkan target!');
                return;
            }
            
            const resultsDiv = document.getElementById('hammerResults');
            resultsDiv.innerHTML = `<div>üî® Starting PORT HAMMER on ${target}...</div>`;
            
            let portsToScan = [];
            if (portRange === 'common') portsToScan = getCommonPorts(1000);
            else if (portRange === 'all') portsToScan = getCommonPorts(10000);
            
            let currentPort = 0;
            
            portHammerInterval = setInterval(() => {
                if (currentPort < portsToScan.length) {
                    const port = portsToScan[currentPort];
                    simulatePortConnection(target, port, timeout);
                    currentPort++;
                    
                    if (currentPort % 100 === 0) {
                        resultsDiv.innerHTML += `<div>üîç Scanned ${currentPort} ports...</div>`;
                    }
                } else {
                    clearInterval(portHammerInterval);
                    resultsDiv.innerHTML += `<div>üéØ Port hammer completed!</div>`;
                }
            }, 10); // Very aggressive - 10ms between port checks
        }
        
        function getCommonPorts(maxPort) {
            const ports = [];
            // Common service ports
            const common = [21, 22, 23, 25, 53, 80, 110, 443, 993, 995, 8080, 8443];
            
            // Add common ports first
            ports.push(...common.filter(p => p <= maxPort));
            
            // Add range of ports
            for (let i = 1; i <= maxPort; i++) {
                if (!ports.includes(i)) {
                    ports.push(i);
                }
            }
            
            return ports;
        }
        
        function simulatePortConnection(target, port, timeout) {
            const startTime = Date.now();
            const willSucceed = Math.random() < 0.05; // 5% success rate for demo
            
            setTimeout(() => {
                if (willSucceed) {
                    const resultsDiv = document.getElementById('hammerResults');
                    if (resultsDiv.children.length > 15) {
                        resultsDiv.removeChild(resultsDiv.firstChild);
                    }
                    resultsDiv.innerHTML += `<div>‚úÖ PORT ${port} OPEN on ${target}</div>`;
                    resultsDiv.scrollTop = resultsDiv.scrollHeight;
                }
            }, Math.random() * timeout);
        }
        
        function updateStats() {
            const now = Date.now();
            const timeDiff = (now - stats.lastUpdate) / 1000;
            
            if (timeDiff > 0) {
                stats.rps = Math.round((stats.requestsSent - stats.rps) / timeDiff);
            }
            
            stats.lastUpdate = now;
            
            // Update UI
            document.getElementById('requestsSent').textContent = stats.requestsSent;
            document.getElementById('successRate').textContent = 
                stats.requestsSent > 0 ? 
                Math.round((stats.requestsSuccess / stats.requestsSent) * 100) + '%' : '0%';
            document.getElementById('avgResponse').textContent = 
                stats.requestsSuccess > 0 ? 
                Math.round(stats.totalResponseTime / stats.requestsSuccess) + 'ms' : '0ms';
            document.getElementById('currentRPS').textContent = stats.rps;
            document.getElementById('totalTime').textContent = 
                Math.round((Date.now() - testStartTime) / 1000) + 's';
            document.getElementById('errorCount').textContent = stats.requestsFailed;
            document.getElementById('workersActive').textContent = activeWorkers;
        }
        
        function resetStats() {
            stats = {
                requestsSent: 0,
                requestsSuccess: 0,
                requestsFailed: 0,
                totalResponseTime: 0,
                lastUpdate: Date.now(),
                rps: 0
            };
        }
        
        function stopStressTest() {
            clearInterval(stressTestInterval);
            activeWorkers = 0;
        }
        
        function stopAllTests() {
            stopStressTest();
            clearInterval(portHammerInterval);
            document.getElementById('stressResults').innerHTML += '<div>üõë ALL TESTS STOPPED</div>';
        }
        
        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            setInterval(updateStats, 1000);
        });
    </script>
</body>
</html>
